<!DOCTYPE html>
<html>
<head>
    <title>SPACE CITY: COMPANIONS</title>
    <style>
        :root { --neon: #00f2ff; --money: #00ff88; --pink: #ff00ff; --glass: rgba(10, 20, 35, 0.98); }
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Orbitron', sans-serif; color: white; }
        
        #hud { 
            position: absolute; top: 30px; left: 30px; 
            padding: 25px; background: var(--glass); 
            border: 1px solid var(--neon); border-left: 8px solid var(--neon);
            z-index: 100;
        }
        #money-val { font-size: 38px; font-weight: 900; color: var(--money); }
        #pet-status { margin-top: 10px; font-size: 11px; color: var(--neon); letter-spacing: 2px; }

        .label {
            position: absolute; text-align: center; pointer-events: none;
            color: var(--neon); font-size: 11px; font-weight: 900;
            background: rgba(0,0,0,0.9); padding: 10px 15px; border: 1px solid var(--neon);
            transform: translate(-50%, -100%); border-radius: 4px; z-index: 50;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
</head>
<body>

    <div id="hud">
        <div style="font-size: 9px; opacity: 0.6; letter-spacing: 3px;">COLONY OVERSEER</div>
        <span id="money-val">ยง 1,000,000</span>
        <div id="pet-status">DRONE STATUS: SYNCHRONIZED</div>
    </div>

    <div id="labels"></div>

    <script type="importmap">
        { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
    </script>

    <script type="module">
        import * as THREE from 'three';

        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x010206);
        
        const aspect = window.innerWidth / window.innerHeight;
        const d = 110;
        const camera = new THREE.OrthographicCamera(-d * aspect, d * aspect, d, -d, 1, 3000);
        camera.position.set(200, 200, 200);
        camera.lookAt(0, 0, 0);

        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        document.body.appendChild(renderer.domElement);

        scene.add(new THREE.AmbientLight(0x4060ff, 0.5));
        const sun = new THREE.DirectionalLight(0xffffff, 2);
        sun.position.set(100, 200, 100);
        scene.add(sun);

        // --- PLAYER & DRONE ---
        const player = new THREE.Group();
        const pBody = new THREE.Mesh(new THREE.CapsuleGeometry(0.8, 1.5), new THREE.MeshStandardMaterial({color: 0x111111}));
        pBody.position.y = 1.5;
        const pHair = new THREE.Mesh(new THREE.SphereGeometry(0.75), new THREE.MeshStandardMaterial({color: 0xff00ff}));
        pHair.position.y = 2.8;
        player.add(pBody, pHair);
        scene.add(player);

        // Aero-Drone (The Pet)
        const drone = new THREE.Group();
        const dBody = new THREE.Mesh(new THREE.IcosahedronGeometry(0.6, 1), new THREE.MeshStandardMaterial({color: 0x00f2ff, emissive: 0x00f2ff, emissiveIntensity: 2}));
        const dRing = new THREE.Mesh(new THREE.TorusGeometry(0.8, 0.1), new THREE.MeshBasicMaterial({color: 0xff00ff}));
        dRing.rotation.x = Math.PI/2;
        drone.add(dBody, dRing);
        scene.add(drone);

        // --- WORLD ---
        let money = 1000000;
        const keys = {}, pads = [];

        // Glass Road with Conduits
        function createGlassRoad(x, z, len) {
            const group = new THREE.Group();
            const glass = new THREE.Mesh(new THREE.BoxGeometry(len, 0.2, 15), new THREE.MeshStandardMaterial({color: 0x00f2ff, transparent: true, opacity: 0.2}));
            const conduit = new THREE.Mesh(new THREE.BoxGeometry(len, 0.1, 1), new THREE.MeshBasicMaterial({color: 0xff00ff}));
            conduit.position.y = -1;
            group.add(glass, conduit);
            group.position.set(x, 0, z);
            scene.add(group);
        }

        // Digital Willow Tree
        function createHoloTree(x, z) {
            const tree = new THREE.Group();
            const trunk = new THREE.Mesh(new THREE.CylinderGeometry(0.2, 0.5, 5), new THREE.MeshBasicMaterial({color: 0x00f2ff, wireframe: true}));
            const leaves = new THREE.Mesh(new THREE.SphereGeometry(3, 8, 8), new THREE.MeshBasicMaterial({color: 0x00f2ff, transparent: true, opacity: 0.4, wireframe: true}));
            leaves.position.y = 4;
            tree.add(trunk, leaves);
            tree.position.set(x, 0, z);
            scene.add(tree);
        }

        const floor = new THREE.Mesh(new THREE.BoxGeometry(500, 2, 500), new THREE.MeshStandardMaterial({color: 0x050505}));
        floor.position.y = -2;
        scene.add(floor);

        createGlassRoad(0, 0, 200);
        createHoloTree(30, 20);
        createHoloTree(-30, -20);

        window.addEventListener('keydown', e => keys[e.code] = true);
        window.addEventListener('keyup', e => keys[e.code] = false);

        function animate() {
            requestAnimationFrame(animate);
            const speed = 1.2;
            if(keys['KeyW']) { player.position.x -= speed; player.position.z -= speed; }
            if(keys['KeyS']) { player.position.x += speed; player.position.z += speed; }
            if(keys['KeyA']) { player.position.x -= speed; player.position.z += speed; }
            if(keys['KeyD']) { player.position.x += speed; player.position.z -= speed; }

            // Drone AI (Smoothly follow player)
            const targetPos = player.position.clone().add(new THREE.Vector3(5, 6 + Math.sin(Date.now() * 0.003) * 1, 5));
            drone.position.lerp(targetPos, 0.05);
            drone.rotation.y += 0.02;
            dRing.rotation.z += 0.1;

            document.getElementById('money-val').innerText = "ยง " + Math.floor(money).toLocaleString();
            camera.position.lerp(player.position.clone().add(new THREE.Vector3(200, 200, 200)), 0.05);
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
