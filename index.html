<!DOCTYPE html>
<html>
<head>
    <title>VOID COLONY | REBOOT</title>
    <style>
        :root { --neon: #00f2ff; --gold: #ffcc00; --bg: #050508; }
        body { margin: 0; overflow: hidden; background: var(--bg); font-family: 'Orbitron', sans-serif; color: white; }
        
        /* SLEEK MINIMAL HUD */
        #hud { 
            position: absolute; top: 40px; left: 40px; 
            padding: 20px; border-left: 4px solid var(--neon);
            background: rgba(0,0,0,0.5); backdrop-filter: blur(10px);
            pointer-events: none;
        }
        #money-val { font-size: 42px; font-weight: 900; color: #fff; display: block; }
        #income-val { font-size: 12px; color: var(--neon); letter-spacing: 2px; }

        .hologram {
            position: absolute; text-align: center; pointer-events: none;
            color: var(--neon); text-shadow: 0 0 10px var(--neon);
            font-weight: bold; transform: translate(-50%, -100%);
            background: rgba(0, 242, 255, 0.05); padding: 10px; border-radius: 5px;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
</head>
<body>

    <div id="hud">
        <span id="money-val">0</span>
        <span id="income-val">STATION OFFLINE</span>
    </div>

    <div id="labels-container"></div>

    <script type="importmap">
        { "imports": { "three": "https://unpkg.com/three@0.160.0/build/three.module.js" } }
    </script>

    <script type="module">
        import * as THREE from 'three';

        // --- SCENE SETUP ---
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x020205);
        
        const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        document.body.appendChild(renderer.domElement);

        // --- LIGHTING (REALISTIC SPACE) ---
        const sun = new THREE.DirectionalLight(0xffffff, 2.5);
        sun.position.set(50, 100, 50);
        scene.add(sun);
        scene.add(new THREE.AmbientLight(0x202040, 0.5));

        // --- ENVIRONMENT ---
        const floor = new THREE.Mesh(
            new THREE.CircleGeometry(200, 64),
            new THREE.MeshStandardMaterial({ color: 0x111115, roughness: 0.9, metalness: 0.2 })
        );
        floor.rotation.x = -Math.PI / 2;
        scene.add(floor);

        // Stars
        const starGeo = new THREE.BufferGeometry();
        const starPos = new Float32Array(10000 * 3);
        for(let i=0; i<30000; i++) starPos[i] = (Math.random()-0.5)*1000;
        starGeo.setAttribute('position', new THREE.BufferAttribute(starPos, 3));
        scene.add(new THREE.Points(starGeo, new THREE.PointsMaterial({color: 0xffffff, size: 0.5})));

        // --- PLAYER ---
        const player = new THREE.Group();
        const body = new THREE.Mesh(new THREE.CapsuleGeometry(0.5, 1), new THREE.MeshStandardMaterial({color: 0xdddddd}));
        body.position.y = 1;
        player.add(body);
        scene.add(player);

        // --- CLICKER CORE ---
        const core = new THREE.Mesh(new THREE.IcosahedronGeometry(1.5, 0), new THREE.MeshStandardMaterial({color: 0x00f2ff, emissive: 0x00f2ff, emissiveIntensity: 2}));
        core.position.set(0, 2, 0);
        scene.add(core);

        // --- STATE ---
        let money = 0, income = 0, vY = 0, isJumping = false;
        const keys = {}, buyPads = [];
        const labelContainer = document.getElementById('labels-container');

        // --- TYCOON PAD SYSTEM ---
        function createPad(x, z, cost, name, onBuy) {
            const group = new THREE.Group();
            const plate = new THREE.Mesh(new THREE.BoxGeometry(6, 0.2, 6), new THREE.MeshStandardMaterial({color: 0x222222}));
            const light = new THREE.Mesh(new THREE.TorusGeometry(2.5, 0.05, 16, 64), new THREE.MeshBasicMaterial({color: 0x00f2ff}));
            light.rotation.x = Math.PI/2;
            light.position.y = 0.15;
            group.add(plate, light);
            group.position.set(x, 0, z);
            
            const div = document.createElement('div');
            div.className = 'hologram';
            div.innerHTML = `<span style="font-size:10px; opacity:0.7">UNLOCKED AT</span><br>ยง${cost}<br><span style="color:white; font-size:16px">${name}</span>`;
            labelContainer.appendChild(div);

            group.userData = { cost, active: true, onBuy, div };
            scene.add(group);
            buyPads.push(group);
        }

        // --- THE STARTING BUILD ---
        createPad(15, 0, 100, "OXYGEN EXTRACTOR", () => {
            income += 10;
            const b = new THREE.Mesh(new THREE.CylinderGeometry(2, 3, 8), new THREE.MeshStandardMaterial({color: 0x444444}));
            b.position.set(15, 4, -10);
            scene.add(b);

            createPad(-15, 0, 500, "POWER TURBINE", () => {
                income += 50;
                const b2 = new THREE.Mesh(new THREE.BoxGeometry(4, 15, 4), new THREE.MeshStandardMaterial({color: 0x666666}));
                b2.position.set(-15, 7.5, -10);
                scene.add(b2);
            });
        });

        // --- CONTROLS ---
        window.addEventListener('keydown', e => keys[e.code] = true);
        window.addEventListener('keyup', e => keys[e.code] = false);
        window.onclick = () => {
            const ray = new THREE.Raycaster();
            const mouse = new THREE.Vector2(0,0); // Center screen click
            ray.setFromCamera(mouse, camera);
            if(ray.intersectObject(core).length > 0) {
                money += 10;
                core.scale.set(1.2, 1.2, 1.2);
            }
        };

        // --- GAME LOOP ---
        function animate() {
            requestAnimationFrame(animate);

            // Movement
            if(keys['KeyW']) player.translateZ(0.3);
            if(keys['KeyS']) player.translateZ(-0.3);
            if(keys['KeyA']) player.rotation.y += 0.05;
            if(keys['KeyD']) player.rotation.y -= 0.05;
            
            if(keys['Space'] && !isJumping) { vY = 0.4; isJumping = true; }
            vY -= 0.02; player.position.y += vY;
            if(player.position.y <= 0) { player.position.y = 0; vY = 0; isJumping = false; }

            // Logic
            money += income/60;
            core.rotation.y += 0.02;
            core.scale.lerp(new THREE.Vector3(1,1,1), 0.1);
            
            document.getElementById('money-val').innerText = Math.floor(money);
            document.getElementById('income-val').innerText = income > 0 ? `+ยง${income}/SEC` : "STATION OFFLINE";

            // Pads
            buyPads.forEach(pad => {
                if(!pad.userData.active) return;
                const v = pad.position.clone().add(new THREE.Vector3(0, 4, 0)).project(camera);
                pad.userData.div.style.left = (v.x * 0.5 + 0.5) * window.innerWidth + 'px';
                pad.userData.div.style.top = (-v.y * 0.5 + 0.5) * window.innerHeight + 'px';
                
                if(player.position.distanceTo(pad.position) < 3 && money >= pad.userData.cost) {
                    money -= pad.userData.cost; pad.userData.active = false; pad.userData.div.remove();
                    scene.remove(pad); pad.userData.onBuy();
                }
            });

            // Camera
            const ideal = new THREE.Vector3(0, 10, -20).applyMatrix4(player.matrixWorld);
            camera.position.lerp(ideal, 0.1);
            camera.lookAt(player.position.clone().add(new THREE.Vector3(0,2,0)));
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
